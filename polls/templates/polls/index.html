{% extends "polls/base.html" %}
{% block title %}一覧 | 点検登録アプリ{% endblock %}

{% block content %}


<p><a href="{% url 'polls:add' %}">点検を登録する</a></p>

<h1>点検登録アプリ</h1>

<form method="get">
  <input type="text" name="q" value="{{ q }}" placeholder="点検内容・車種で検索">
  <button type="submit">検索</button>
  {% if q %}
    <a href="{% url 'polls:index' %}">クリア</a>
  {% endif %}
</form>


{% if latest_question_list %}
  <table class="list-table">

    <thead>
  <tr>
    <th>点検内容</th>
    <th>車種</th>
    <th>走行距離(km)</th>
    <th>登録日時</th>
    <th>操作</th>
  </tr>
</thead>

<tbody>
{% for question in latest_question_list %}
  <tr>
    <td>{{ question.question_text }}</td>
    <td>{{ question.car_model|default:"-" }}</td>
    <td>{{ question.mileage }}</td>
    <td>{{ question.pub_date|date:"Y/m/d H:i" }}</td>
    <td class="actions"></td>
    <td class="actions">
      <a class="btn" href="{% url 'polls:detail' question.id %}">詳細</a> |
      <a class="btn" href="{% url 'polls:edit' question.id %}">編集</a> |

      <form action="{% url 'polls:delete' question.id %}" method="post" style="display:inline;">
        {% csrf_token %}
        <button type="submit" class="btn-danger" onclick="return confirm('本当に削除しますか？');">削除</button>
      </form>
    </td>
  </tr>
{% endfor %}
</tbody>
</table>

{% else %}
  {% if q %}
    <p>「{{ q }}」に一致する点検はありません。</p>
  {% else %}
    <p>点検がまだ登録されていません。</p>
  {% endif %}
{% endif %}

{% endblock %}